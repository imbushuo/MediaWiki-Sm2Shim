/** @license
 *
 * SoundManager 2: JavaScript Sound for the Web
 * ----------------------------------------------
 * http://schillmania.com/projects/soundmanager2/
 *
 * Copyright (c) 2007, Scott Schiller. All rights reserved.
 * Code provided under the BSD License:
 * http://schillmania.com/projects/soundmanager2/license.txt
 *
 * V2.97a.20150601
 */
var __extends,System,Sm2ShimUtils,Sm2Shim;(function(n,t){"use strict";function i(i,r){function tr(n){return u.preferFlash&&et&&!u.ignoreFlash&&u.flash[n]!==t&&u.flash[n]}function y(n){return function(t){var i=this._s,r;return i&&i._a?r=n.call(this,t):(i&&i.id?u._wD(i.id+": Ignoring "+t.type):u._wD(lf+"Ignoring "+t.type),r=null),r}}this.setupOptions={url:i||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,forceUseGlobalHTML5Audio:!1,ignoreMobileRestrictions:!1,html5Test:/^(probably|maybe)$/i,preferFlash:!1,noSWFCache:!1,idPrefix:"sound"};this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100};this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null};this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null};this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},opus:{type:["audio/ogg; codecs=opus","audio/opus"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}};this.movieID="sm2-container";this.id=r||"sm2movie";this.debugID="soundmanager-debug";this.debugURLParam=/([#?&])debug=1/i;this.versionNumber="V2.97a.20150601";this.version=null;this.movieURL=null;this.altURL=null;this.swfLoaded=!1;this.enabled=!1;this.oMC=null;this.sounds={};this.soundIDs=[];this.muted=!1;this.didFlashBlock=!1;this.filePattern=null;this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i};this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1};this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null};this.html5={usingFlash:null};this.flash={};this.html5Only=!1;this.ignoreFlash=!1;var ou,u=this,su=null,f=null,s="soundManager",l=s+": ",lf="HTML5::",ut,w=navigator.userAgent,oi=n.location.href.toString(),e=document,ir,hu,rr,o,ft=[],ur=!0,it,kt=!1,dt=!1,v=!1,d=!1,si=!1,h,af=0,gt,b,fr,cu,er,at,yt,pt,lu,or,sr,hr,rt,hi,vt,cr,ni,ci,li,wt,au,lr,vu=["log","info","warn","error"],yu=8,pu,ar,wu,ti=null,vr=null,c,yr,bt,tt,bu,ai,vi,st,a,ii=!1,pr=!1,ku,du,gu,yi=0,ri=null,pi,ht=[],ui,g=null,nf,wi,fi,ct,bi,wr,tf,p,rf=Array.prototype.slice,nt=!1,br,et,kr,uf,ot,ff,dr,ki,ef=0,gr,k=1e3,nu=w.match(/(ipad|iphone|ipod)/i),tu=w.match(/android/i),lt=w.match(/(msie|trident)/i),vf=w.match(/webkit/i),di=w.match(/safari/i)&&!w.match(/chrome/i),iu=w.match(/opera/i),gi=w.match(/(mobile|pre\/|xoom)/i)||nu||tu,ru=!oi.match(/usehtml5audio/i)&&!oi.match(/sm2\-ignorebadua/i)&&di&&!w.match(/silk/i)&&w.match(/OS X 10_6_([3-7])/i),uu=n.console!==t&&console.log!==t,fu=e.hasFocus!==t?e.hasFocus():null,nr=di&&(e.hasFocus===t||!e.hasFocus()),of=!nr,sf=/(mp3|mp4|mpa|m4a|m4b)/i,eu="about:blank",yf="data:audio/wave;base64,/UklGRiYAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQIAAAD//w==",ei=e.location?e.location.protocol.match(/http/i):null,pf=ei?"":"http://",hf=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,cf=["mpeg4","aac","flv","mov","mp4","m4v","f4v","m4a","m4b","mp4v","3gp","3g2"],wf=new RegExp("\\.("+cf.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i;this.useAltURL=!ei;tt={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"};this.hasHTML5=function(){try{return Audio!==t&&(iu&&opera!==t&&opera.version()<10?new Audio(null):new Audio).canPlayType!==t}catch(n){return!1}}();this.setup=function(n){var i=!u.url;return n!==t&&v&&g&&u.ok()&&(n.flashVersion!==t||n.url!==t||n.html5Test!==t)&&st(c("setupLate")),fr(n),nt||(gi?(!u.setupOptions.ignoreMobileRestrictions||u.setupOptions.forceUseGlobalHTML5Audio)&&(ht.push(rt.globalHTML5),nt=!0):u.setupOptions.forceUseGlobalHTML5Audio&&(ht.push(rt.globalHTML5),nt=!0)),!gr&&gi&&(u.setupOptions.ignoreMobileRestrictions?ht.push(rt.ignoreMobile):((!u.setupOptions.useHTML5Audio||u.setupOptions.preferFlash)&&u._wD(rt.mobileUA),u.setupOptions.useHTML5Audio=!0,u.setupOptions.preferFlash=!1,nu?u.ignoreFlash=!0:(!tu||w.match(/android\s2\.3/i))&&tu||(u._wD(rt.globalHTML5),nt=!0))),n&&(i&&ni&&n.url!==t&&u.beginDelayedInit(),ni||n.url===t||e.readyState!=="complete"||setTimeout(vt,1)),gr=!0,u};this.ok=function(){return g?v&&!d:u.useHTML5Audio&&u.hasHTML5};this.supported=this.ok;this.getMovie=function(t){return ut(t)||e[t]||n[t]};this.createSound=function(n,i){function y(){return r=ai(r),u.sounds[r.id]=new ou(r),u.soundIDs.push(r.id),u.sounds[r.id]}var l,p,r,e=null;if(l=s+".createSound(): ",p=l+c(v?"notOK":"notReady"),!v||!u.ok())return st(p),!1;if(i!==t&&(n={id:n,url:i}),r=b(n),r.url=pi(r.url),r.id===t&&(r.id=u.setupOptions.idPrefix+ef++),r.id.toString().charAt(0).match(/^[0-9]$/)&&u._wD(l+c("badID",r.id),2),u._wD(l+r.id+(r.url?" ("+r.url+")":""),1),a(r.id,!0))return u._wD(l+r.id+" exists",1),u.sounds[r.id];if(wi(r))e=y(),u.html5Only||u._wD(r.id+": Using HTML5"),e._setup_html5(r);else{if(u.html5Only)return u._wD(r.id+": No HTML5 support for this sound, and no Flash. Exiting."),y();if(u.html5.usingFlash&&r.url&&r.url.match(/data\:/i))return u._wD(r.id+": data: URIs not supported via Flash. Exiting."),y();o>8&&(r.isMovieStar===null&&(r.isMovieStar=!!(r.serverURL||(r.type?r.type.match(hf):!1)||r.url&&r.url.match(wf))),r.isMovieStar&&(u._wD(l+"using MovieStar handling"),r.loops>1&&h("noNSLoop")));r=vi(r,l);e=y();o===8?f._createSound(r.id,r.loops||1,r.usePolicyFile):(f._createSound(r.id,r.url,r.usePeakData,r.useWaveformData,r.useEQData,r.isMovieStar,r.isMovieStar?r.bufferTime:!1,r.loops||1,r.serverURL,r.duration||null,r.autoPlay,!0,r.autoLoad,r.usePolicyFile),r.serverURL||(e.connected=!0,r.onconnect&&r.onconnect.apply(e)));!r.serverURL&&(r.autoLoad||r.autoPlay)&&e.load(r)}return!r.serverURL&&r.autoPlay&&e.play(),e};this.destroySound=function(n,t){if(!a(n))return!1;var i=u.sounds[n],r;for(i.stop(),i._iO={},i.unload(),r=0;r<u.soundIDs.length;r++)if(u.soundIDs[r]===n){u.soundIDs.splice(r,1);break}return t||i.destruct(!0),i=null,delete u.sounds[n],!0};this.load=function(n,t){return a(n)?u.sounds[n].load(t):!1};this.unload=function(n){return a(n)?u.sounds[n].unload():!1};this.onPosition=function(n,t,i,r){return a(n)?u.sounds[n].onposition(t,i,r):!1};this.onposition=this.onPosition;this.clearOnPosition=function(n,t,i){return a(n)?u.sounds[n].clearOnPosition(t,i):!1};this.play=function(n,t){var i=null,r=t&&!(t instanceof Object);if(!v||!u.ok())return st(s+".play(): "+c(v?"notOK":"notReady")),!1;if(a(n,r))r&&(t={url:t});else{if(!r)return!1;r&&(t={url:t});t&&t.url&&(u._wD(s+'.play(): Attempting to create "'+n+'"',1),t.id=n,i=u.createSound(t).play())}return i===null&&(i=u.sounds[n].play(t)),i};this.start=this.play;this.setPosition=function(n,t){return a(n)?u.sounds[n].setPosition(t):!1};this.stop=function(n){return a(n)?(u._wD(s+".stop("+n+")",1),u.sounds[n].stop()):!1};this.stopAll=function(){var n;u._wD(s+".stopAll()",1);for(n in u.sounds)u.sounds.hasOwnProperty(n)&&u.sounds[n].stop()};this.pause=function(n){return a(n)?u.sounds[n].pause():!1};this.pauseAll=function(){for(var n=u.soundIDs.length-1;n>=0;n--)u.sounds[u.soundIDs[n]].pause()};this.resume=function(n){return a(n)?u.sounds[n].resume():!1};this.resumeAll=function(){for(var n=u.soundIDs.length-1;n>=0;n--)u.sounds[u.soundIDs[n]].resume()};this.togglePause=function(n){return a(n)?u.sounds[n].togglePause():!1};this.setPan=function(n,t){return a(n)?u.sounds[n].setPan(t):!1};this.setVolume=function(n,i){var r,f;if(n!==t&&!isNaN(n)&&i===t){for(r=0,f=u.soundIDs.length;r<f;r++)u.sounds[u.soundIDs[r]].setVolume(n);return}return a(n)?u.sounds[n].setVolume(i):!1};this.mute=function(n){var t=0;if(n instanceof String&&(n=null),n)return a(n)?(u._wD(s+'.mute(): Muting "'+n+'"'),u.sounds[n].mute()):!1;for(u._wD(s+".mute(): Muting all sounds"),t=u.soundIDs.length-1;t>=0;t--)u.sounds[u.soundIDs[t]].mute();return u.muted=!0,!0};this.muteAll=function(){u.mute()};this.unmute=function(n){var t;if(n instanceof String&&(n=null),n)return a(n)?(u._wD(s+'.unmute(): Unmuting "'+n+'"'),u.sounds[n].unmute()):!1;for(u._wD(s+".unmute(): Unmuting all sounds"),t=u.soundIDs.length-1;t>=0;t--)u.sounds[u.soundIDs[t]].unmute();return u.muted=!1,!0};this.unmuteAll=function(){u.unmute()};this.toggleMute=function(n){return a(n)?u.sounds[n].toggleMute():!1};this.getMemoryUse=function(){var n=0;return f&&o!==8&&(n=parseInt(f._getMemoryUse(),10)),n};this.disable=function(i){var r;if(i===t&&(i=!1),d)return!1;for(d=!0,h("shutdown",1),r=u.soundIDs.length-1;r>=0;r--)pu(u.sounds[u.soundIDs[r]]);return gt(i),p.remove(n,"load",yt),!0};this.canPlayMIME=function(n){var t;return u.hasHTML5&&(t=fi({type:n})),!t&&g&&(t=n&&u.ok()?!!((o>8?n.match(hf):null)||n.match(u.mimePattern)):null),t};this.canPlayURL=function(n){var t;return u.hasHTML5&&(t=fi({url:n})),!t&&g&&(t=n&&u.ok()?!!n.match(u.filePattern):null),t};this.canPlayLink=function(n){return n.type!==t&&n.type&&u.canPlayMIME(n.type)?!0:u.canPlayURL(n.href)};this.getSoundById=function(n,t){if(!n)return null;var i=u.sounds[n];return i||t||u._wD(s+'.getSoundById(): Sound "'+n+'" not found.',2),i};this.onready=function(t,i){var r="onready",f=!1;if(typeof t=="function")v&&u._wD(c("queue",r)),i||(i=n),er(r,t,i),at(),f=!0;else throw c("needFunction",r);return f};this.ontimeout=function(t,i){var r="ontimeout",f=!1;if(typeof t=="function")v&&u._wD(c("queue",r)),i||(i=n),er(r,t,i),at({type:r}),f=!0;else throw c("needFunction",r);return f};this._writeDebug=function(n,i){var f,r;return u.setupOptions.debugMode?uu&&u.useConsole&&(i&&typeof i=="object"?console.log(n,i):vu[i]!==t?console[vu[i]](n):console.log(n),u.consoleOnly)?!0:(f=ut("soundmanager-debug"),!f)?!1:(r=e.createElement("div"),++af%2==0&&(r.className="sm2-alt"),i=i===t?0:parseInt(i,10),r.appendChild(e.createTextNode(n)),i&&(i>=2&&(r.style.fontWeight="bold"),i===3&&(r.style.color="#ff3333")),f.insertBefore(r,f.firstChild),f=null,!0):!1};oi.indexOf("sm2-debug=alert")!==-1&&(this._writeDebug=function(t){n.alert(t)});this._wD=this._writeDebug;this._debug=function(){var n,t;for(h("currentObj",1),n=0,t=u.soundIDs.length;n<t;n++)u.sounds[u.soundIDs[n]]._debug()};this.reboot=function(t,i){u.soundIDs.length&&u._wD("Destroying "+u.soundIDs.length+" SMSound object"+(u.soundIDs.length!==1?"s":"")+"...");for(var e,o,r=u.soundIDs.length-1;r>=0;r--)u.sounds[u.soundIDs[r]].destruct();if(f)try{lt&&(vr=f.innerHTML);ti=f.parentNode.removeChild(f)}catch(c){h("badRemove",2)}if(vr=ti=g=f=null,u.enabled=ni=v=ii=pr=kt=dt=d=nt=u.swfLoaded=!1,u.soundIDs=[],u.sounds={},ef=0,gr=!1,t)ft=[];else for(r in ft)if(ft.hasOwnProperty(r))for(e=0,o=ft[r].length;e<o;e++)ft[r][e].fired=!1;return i||u._wD(s+": Rebooting..."),u.html5={usingFlash:null},u.flash={},u.html5Only=!1,u.ignoreFlash=!1,n.setTimeout(function(){i||u.beginDelayedInit()},20),u};this.reset=function(){return h("reset"),u.reboot(!0,!0)};this.getMoviePercent=function(){return f&&"PercentLoaded"in f?f.PercentLoaded():null};this.beginDelayedInit=function(){si=!0;vt();setTimeout(function(){return pr?!1:(li(),hi(),pr=!0,!0)},20);pt()};this.destruct=function(){u._wD(s+".destruct()");u.disable(!0)};ou=function(n){var i=this,y,rt,ut,s,w,ft,d=!1,r=[],l=0,g,et,e=null,v,tt;v={duration:null,time:null};this.id=n.id;this.sID=this.id;this.url=n.url;this.options=b(n);this.instanceOptions=this.options;this._iO=this.instanceOptions;this.pan=this.options.pan;this.volume=this.options.volume;this.isHTML5=!1;this._a=null;tt=this.url?!1:!0;this.id3={};this._debug=function(){u._wD(i.id+": Merged options:",i.options)};this.load=function(n){var s=null,r;if(n!==t?i._iO=b(n,i.options):(n=i.options,i._iO=n,e&&e!==i.url&&(h("manURL"),i._iO.url=i.url,i.url=null)),i._iO.url||(i._iO.url=i.url),i._iO.url=pi(i._iO.url),i.instanceOptions=i._iO,r=i._iO,u._wD(i.id+": load ("+r.url+")"),!r.url&&!i.url)return u._wD(i.id+": load(): url is unassigned. Exiting.",2),i;if(i.isHTML5||o!==8||i.url||r.autoPlay||u._wD(i.id+": Flash 8 load() limitation: Wait for onload() before calling play().",1),r.url===i.url&&i.readyState!==0&&i.readyState!==2)return h("onURL",1),i.readyState===3&&r.onload&&ki(i,function(){r.onload.apply(i,[!!i.duration])}),i;if(i.loaded=!1,i.readyState=1,i.playState=0,i.id3={},wi(r))s=i._setup_html5(r),s._called_load?u._wD(i.id+": Ignoring request to load again"):(i._html5_canplay=!1,i.url!==r.url&&(u._wD(h("manURL")+": "+r.url),i._a.src=r.url,i.setPosition(0)),i._a.autobuffer="auto",i._a.preload="auto",i._a._called_load=!0);else{if(u.html5Only)return u._wD(i.id+": No flash support. Exiting."),i;if(i._iO.url&&i._iO.url.match(/data\:/i))return u._wD(i.id+": data: URIs not supported via Flash. Exiting."),i;try{i.isHTML5=!1;i._iO=vi(ai(r));i._iO.autoPlay&&(i._iO.position||i._iO.from)&&(u._wD(i.id+": Disabling autoPlay because of non-zero offset case"),i._iO.autoPlay=!1);r=i._iO;o===8?f._load(i.id,r.url,r.stream,r.autoPlay,r.usePolicyFile):f._load(i.id,r.url,!!r.stream,!!r.autoPlay,r.loops||1,!!r.autoLoad,r.usePolicyFile)}catch(c){h("smError",2);it("onload",!1);wt({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}}return i.url=r.url,i};this.unload=function(){return i.readyState!==0&&(u._wD(i.id+": unload()"),i.isHTML5?(s(),i._a&&(i._a.pause(),e=bi(i._a))):o===8?f._unload(i.id,eu):f._unload(i.id),y()),i};this.destruct=function(n){u._wD(i.id+": Destruct");i.isHTML5?(s(),i._a&&(i._a.pause(),bi(i._a),nt||ut(),i._a._s=null,i._a=null)):(i._iO.onfailure=null,f._destroySound(i.id));n||u.destroySound(i.id,!0)};this.play=function(n,r){var e,v,y,c,s,l,a,g=!0,h=null;if(e=i.id+": play(): ",r=r===t?!0:r,n||(n={}),i.url&&(i._iO.url=i.url),i._iO=b(i._iO,i.options),i._iO=b(n,i._iO),i._iO.url=pi(i._iO.url),i.instanceOptions=i._iO,!i.isHTML5&&i._iO.serverURL&&!i.connected)return i.getAutoPlay()||(u._wD(e+" Netstream not connected yet - setting autoPlay"),i.setAutoPlay(!0)),i;if((wi(i._iO)&&(i._setup_html5(i._iO),w()),i.playState!==1||i.paused||(v=i._iO.multiShot,v?u._wD(e+"Already playing (multi-shot)",1):(u._wD(e+"Already playing (one-shot)",1),i.isHTML5&&i.setPosition(i._iO.position),h=i)),h!==null)||(n.url&&n.url!==i.url&&(i.readyState||i.isHTML5||o!==8||!tt?i.load(i._iO):tt=!1),i.loaded?u._wD(e.substr(0,e.lastIndexOf(":"))):i.readyState===0?(u._wD(e+"Attempting to load"),i.isHTML5||u.html5Only?i.isHTML5?i.load(i._iO):(u._wD(e+"Unsupported type. Exiting."),h=i):(i._iO.autoPlay=!0,i.load(i._iO)),i.instanceOptions=i._iO):i.readyState===2?(u._wD(e+"Could not load - exiting",2),h=i):u._wD(e+"Loading - attempting to play..."),h!==null))return h;if(!i.isHTML5&&o===9&&i.position>0&&i.position===i.duration&&(u._wD(e+"Sound at end, resetting to position: 0"),n.position=0),i.paused&&i.position>=0&&(!i._iO.serverURL||i.position>0))u._wD(e+"Resuming from paused state",1),i.resume();else{if(i._iO=b(n,i._iO),(!i.isHTML5&&i._iO.position!==null&&i._iO.position>0||i._iO.from!==null&&i._iO.from>0||i._iO.to!==null)&&i.instanceCount===0&&i.playState===0&&!i._iO.serverURL){if(c=function(){i._iO=b(n,i._iO);i.play(i._iO)},i.isHTML5&&!i._html5_canplay?(u._wD(e+"Beginning load for non-zero offset case"),i.load({_oncanplay:c}),h=!1):i.isHTML5||i.loaded||i.readyState&&i.readyState===2||(u._wD(e+"Preloading for non-zero offset case"),i.load({onload:c}),h=!1),h!==null)return h;i._iO=et()}(!i.instanceCount||i._iO.multiShotEvents||i.isHTML5&&i._iO.multiShot&&!nt||!i.isHTML5&&o>8&&!i.getAutoPlay())&&i.instanceCount++;i._iO.onposition&&i.playState===0&&ft(i);i.playState=1;i.paused=!1;i.position=i._iO.position!==t&&!isNaN(i._iO.position)?i._iO.position:0;i.isHTML5||(i._iO=vi(ai(i._iO)));i._iO.onplay&&r&&(i._iO.onplay.apply(i),d=!0);i.setVolume(i._iO.volume,!0);i.setPan(i._iO.pan,!0);i.isHTML5?i.instanceCount<2?(w(),y=i._setup_html5(),i.setPosition(i._iO.position),y.play()):(u._wD(i.id+": Cloning Audio() for instance #"+i.instanceCount+"..."),s=new Audio(i._iO.url),l=function(){p.remove(s,"ended",l);i._onfinish(i);bi(s);s=null},a=function(){p.remove(s,"canplay",a);try{s.currentTime=i._iO.position/k}catch(n){st(i.id+": multiShot play() failed to apply position of "+i._iO.position/k)}s.play()},p.add(s,"ended",l),i._iO.volume!==t&&(s.volume=Math.max(0,Math.min(1,i._iO.volume/100))),i.muted&&(s.muted=!0),i._iO.position?p.add(s,"canplay",a):s.play()):(g=f._start(i.id,i._iO.loops||1,o===9?i.position:i.position/k,i._iO.multiShot||!1),o!==9||g||(u._wD(e+"No sound hardware, or 32-sound ceiling hit",2),i._iO.onplayerror&&i._iO.onplayerror.apply(i)))}return i};this.start=this.play;this.stop=function(n){var t=i._iO,r;return i.playState===1&&(u._wD(i.id+": stop()"),i._onbufferchange(0),i._resetOnPosition(0),i.paused=!1,i.isHTML5||(i.playState=0),g(),t.to&&i.clearOnPosition(t.to),i.isHTML5?i._a&&(r=i.position,i.setPosition(0),i.position=r,i._a.pause(),i.playState=0,i._onTimer(),s()):(f._stop(i.id,n),t.serverURL&&i.unload()),i.instanceCount=0,i._iO={},t.onstop&&t.onstop.apply(i)),i};this.setAutoPlay=function(n){u._wD(i.id+": Autoplay turned "+(n?"on":"off"));i._iO.autoPlay=n;i.isHTML5||(f._setAutoPlay(i.id,n),n&&(i.instanceCount||i.readyState!==1||(i.instanceCount++,u._wD(i.id+": Incremented instance count to "+i.instanceCount))))};this.getAutoPlay=function(){return i._iO.autoPlay};this.setPosition=function(n){n===t&&(n=0);var e,r,s=i.isHTML5?Math.max(n,0):Math.min(i.duration||i._iO.duration,Math.max(n,0));if(i.position=s,r=i.position/k,i._resetOnPosition(i.position),i._iO.position=s,i.isHTML5){if(i._a){if(i._html5_canplay){if(i._a.currentTime!==r){u._wD(i.id+": setPosition("+r+")");try{i._a.currentTime=r;(i.playState===0||i.paused)&&i._a.pause()}catch(h){u._wD(i.id+": setPosition("+r+") failed: "+h.message,2)}}}else if(r)return u._wD(i.id+": setPosition("+r+"): Cannot seek yet, sound not ready",2),i;i.paused&&i._onTimer(!0)}}else e=o===9?i.position:r,i.readyState&&i.readyState!==2&&f._setPosition(i.id,e,i.paused||!i.playState,i._iO.multiShot);return i};this.pause=function(n){return i.paused||i.playState===0&&i.readyState!==1?i:(u._wD(i.id+": pause()"),i.paused=!0,i.isHTML5?(i._setup_html5().pause(),s()):(n||n===t)&&f._pause(i.id,i._iO.multiShot),i._iO.onpause&&i._iO.onpause.apply(i),i)};this.resume=function(){var n=i._iO;return i.paused?(u._wD(i.id+": resume()"),i.paused=!1,i.playState=1,i.isHTML5?(i._setup_html5().play(),w()):(n.isMovieStar&&!n.serverURL&&i.setPosition(i.position),f._pause(i.id,n.multiShot)),!d&&n.onplay?(n.onplay.apply(i),d=!0):n.onresume&&n.onresume.apply(i),i):i};this.togglePause=function(){return(u._wD(i.id+": togglePause()"),i.playState===0)?(i.play({position:o===9&&!i.isHTML5?i.position:i.position/k}),i):(i.paused?i.resume():i.pause(),i)};this.setPan=function(n,r){return n===t&&(n=0),r===t&&(r=!1),i.isHTML5||f._setPan(i.id,n),i._iO.pan=n,r||(i.pan=n,i.options.pan=n),i};this.setVolume=function(n,r){return n===t&&(n=100),r===t&&(r=!1),i.isHTML5?i._a&&(u.muted&&!i.muted&&(i.muted=!0,i._a.muted=!0),i._a.volume=Math.max(0,Math.min(1,n/100))):f._setVolume(i.id,u.muted&&!i.muted||i.muted?0:n),i._iO.volume=n,r||(i.volume=n,i.options.volume=n),i};this.mute=function(){return i.muted=!0,i.isHTML5?i._a&&(i._a.muted=!0):f._setVolume(i.id,0),i};this.unmute=function(){i.muted=!1;var n=i._iO.volume!==t;return i.isHTML5?i._a&&(i._a.muted=!1):f._setVolume(i.id,n?i._iO.volume:i.options.volume),i};this.toggleMute=function(){return i.muted?i.unmute():i.mute()};this.onPosition=function(n,u,f){return r.push({position:parseInt(n,10),method:u,scope:f!==t?f:i,fired:!1}),i};this.onposition=this.onPosition;this.clearOnPosition=function(n,t){var i;if(n=parseInt(n,10),isNaN(n))return!1;for(i=0;i<r.length;i++)n===r[i].position&&(t&&t!==r[i].method||(r[i].fired&&l--,r.splice(i,1)))};this._processOnPosition=function(){var t,n,u=r.length;if(!u||!i.playState||l>=u)return!1;for(t=u-1;t>=0;t--)n=r[t],!n.fired&&i.position>=n.position&&(n.fired=!0,l++,n.method.apply(n.scope,[n.position]),u=r.length);return!0};this._resetOnPosition=function(n){var t,i,u=r.length;if(!u)return!1;for(t=u-1;t>=0;t--)i=r[t],i.fired&&n<=i.position&&(i.fired=!1,l--);return!0};et=function(){var n=i._iO,r=n.from,t=n.to,e,f;return f=function(){u._wD(i.id+': "To" time of '+t+" reached.");i.clearOnPosition(t,f);i.stop()},e=function(){if(u._wD(i.id+': Playing "from" '+r),t!==null&&!isNaN(t))i.onPosition(t,f)},r===null||isNaN(r)||(n.position=r,n.multiShot=!1,e()),n};ft=function(){var n,t=i._iO.onposition;if(t)for(n in t)if(t.hasOwnProperty(n))i.onPosition(parseInt(n,10),t[n])};g=function(){var n,t=i._iO.onposition;if(t)for(n in t)t.hasOwnProperty(n)&&i.clearOnPosition(parseInt(n,10))};w=function(){i.isHTML5&&ku(i)};s=function(){i.isHTML5&&du(i)};y=function(n){n||(r=[],l=0);d=!1;i._hasTimer=null;i._a=null;i._html5_canplay=!1;i.bytesLoaded=null;i.bytesTotal=null;i.duration=i._iO&&i._iO.duration?i._iO.duration:null;i.durationEstimate=null;i.buffered=[];i.eqData=[];i.eqData.left=[];i.eqData.right=[];i.failures=0;i.isBuffering=!1;i.instanceOptions={};i.instanceCount=0;i.loaded=!1;i.metadata={};i.readyState=0;i.muted=!1;i.paused=!1;i.peakData={left:0,right:0};i.waveformData={left:[],right:[]};i.playState=0;i.position=null;i.id3={}};y();this._onTimer=function(n){var t,r=!1,u,f={};if(i._hasTimer||n)return i._a&&(n||(i.playState>0||i.readyState===1)&&!i.paused)&&(t=i._get_html5_duration(),t!==v.duration&&(v.duration=t,i.duration=t,r=!0),i.durationEstimate=i.duration,u=i._a.currentTime*k||0,u!==v.time&&(v.time=u,r=!0),(r||n)&&i._whileplaying(u,f,f,f,f)),r};this._get_html5_duration=function(){var t=i._iO,n=i._a&&i._a.duration?i._a.duration*k:t&&t.duration?t.duration:null;return n&&!isNaN(n)&&n!==Infinity?n:null};this._apply_loop=function(n,t){!n.loop&&t>1&&u._wD("Note: Native HTML5 looping is infinite.",1);n.loop=t>1?"loop":""};this._setup_html5=function(n){var r=b(i._iO,n),t=nt?su:i._a,f=decodeURI(r.url),u;if(nt?f===decodeURI(br)&&(u=!0):f===decodeURI(e)&&(u=!0),t){if(t._s)if(nt)t._s&&t._s.playState&&!u&&t._s.stop();else if(!nt&&f===decodeURI(e))return i._apply_loop(t,r.loops),t;u||(e&&y(!1),t.src=r.url,i.url=r.url,e=r.url,br=r.url,t._called_load=!1)}else r.autoLoad||r.autoPlay?(i._a=new Audio(r.url),i._a.load()):i._a=iu&&opera.version()<10?new Audio(null):new Audio,t=i._a,t._called_load=!1,nt&&(su=t);return i.isHTML5=!0,i._a=t,t._s=i,rt(),i._apply_loop(t,r.loops),r.autoLoad||r.autoPlay?i.load():(t.autobuffer=!1,t.preload="auto"),t};rt=function(){function t(n,t,r){return i._a?i._a.addEventListener(n,t,r||!1):null}if(i._a._added_events)return!1;var n;i._a._added_events=!0;for(n in ot)ot.hasOwnProperty(n)&&t(n,ot[n]);return!0};ut=function(){function t(n,t,r){return i._a?i._a.removeEventListener(n,t,r||!1):null}var n;u._wD(i.id+": Removing event listeners");i._a._added_events=!1;for(n in ot)ot.hasOwnProperty(n)&&t(n,ot[n])};this._onload=function(n){var r,t=!!n||!i.isHTML5&&o===8&&i.duration;return r=i.id+": ",u._wD(r+(t?"onload()":"Failed to load / invalid sound?"+(i.duration?" -":" Zero-length duration reported.")+" ("+i.url+")"),t?1:2),t||i.isHTML5||(u.sandbox.noRemote===!0&&u._wD(r+c("noNet"),1),u.sandbox.noLocal===!0&&u._wD(r+c("noLocal"),1)),i.loaded=t,i.readyState=t?3:2,i._onbufferchange(0),i._iO.onload&&ki(i,function(){i._iO.onload.apply(i,[t])}),!0};this._onbufferchange=function(n){return i.playState===0?!1:n&&i.isBuffering||!n&&!i.isBuffering?!1:(i.isBuffering=n===1,i._iO.onbufferchange&&(u._wD(i.id+": Buffer state change: "+n),i._iO.onbufferchange.apply(i,[n])),!0)};this._onsuspend=function(){return i._iO.onsuspend&&(u._wD(i.id+": Playback suspended"),i._iO.onsuspend.apply(i)),!0};this._onfailure=function(n,t,r){if(i.failures++,u._wD(i.id+": Failure ("+i.failures+"): "+n),i._iO.onfailure&&i.failures===1)i._iO.onfailure(n,t,r);else u._wD(i.id+": Ignoring failure")};this._onwarning=function(n,t,r){if(i._iO.onwarning)i._iO.onwarning(n,t,r)};this._onfinish=function(){var n=i._iO.onfinish;i._onbufferchange(0);i._resetOnPosition(0);i.instanceCount&&(i.instanceCount--,i.instanceCount||(g(),i.playState=0,i.paused=!1,i.instanceCount=0,i.instanceOptions={},i._iO={},s(),i.isHTML5&&(i.position=0)),(!i.instanceCount||i._iO.multiShotEvents)&&n&&(u._wD(i.id+": onfinish()"),ki(i,function(){n.apply(i)})))};this._whileloading=function(n,t,r,u){var f=i._iO;i.bytesLoaded=n;i.bytesTotal=t;i.duration=Math.floor(r);i.bufferLength=u;i.durationEstimate=i.isHTML5||f.isMovieStar?i.duration:f.duration?i.duration>f.duration?i.duration:f.duration:parseInt(i.bytesTotal/i.bytesLoaded*i.duration,10);i.isHTML5||(i.buffered=[{start:0,end:i.duration}]);(i.readyState!==3||i.isHTML5)&&f.whileloading&&f.whileloading.apply(i)};this._whileplaying=function(n,r,u,f,e){var s=i._iO,h;return isNaN(n)||n===null?!1:(i.position=Math.max(0,n),i._processOnPosition(),!i.isHTML5&&o>8&&(s.usePeakData&&r!==t&&r&&(i.peakData={left:r.leftPeak,right:r.rightPeak}),s.useWaveformData&&u!==t&&u&&(i.waveformData={left:u.split(","),right:f.split(",")}),s.useEQData&&e!==t&&e&&e.leftEQ&&(h=e.leftEQ.split(","),i.eqData=h,i.eqData.left=h,e.rightEQ!==t&&e.rightEQ&&(i.eqData.right=e.rightEQ.split(",")))),i.playState===1&&(i.isHTML5||o!==8||i.position||!i.isBuffering||i._onbufferchange(0),s.whileplaying&&s.whileplaying.apply(i)),!0)};this._oncaptiondata=function(n){u._wD(i.id+": Caption data received.");i.captiondata=n;i._iO.oncaptiondata&&i._iO.oncaptiondata.apply(i,[n])};this._onmetadata=function(n,t){u._wD(i.id+": Metadata received.");for(var f={},r=0,e=n.length;r<e;r++)f[n[r]]=t[r];i.metadata=f;i._iO.onmetadata&&i._iO.onmetadata.call(i,i.metadata)};this._onid3=function(n,t){u._wD(i.id+": ID3 data received.");for(var f=[],r=0,e=n.length;r<e;r++)f[n[r]]=t[r];i.id3=b(i.id3,f);i._iO.onid3&&i._iO.onid3.apply(i)};this._onconnect=function(n){n=n===1;u._wD(i.id+": "+(n?"Connected.":"Failed to connect? - "+i.url),n?1:2);i.connected=n;n&&(i.failures=0,a(i.id)&&(i.getAutoPlay()?i.play(t,i.getAutoPlay()):i._iO.autoLoad&&i.load()),i._iO.onconnect&&i._iO.onconnect.apply(i,[n]))};this._ondataerror=function(n){i.playState>0&&(u._wD(i.id+": Data error: "+n),i._iO.ondataerror&&i._iO.ondataerror.apply(i))};this._debug()};ci=function(){return e.body||e.getElementsByTagName("div")[0]};ut=function(n){return e.getElementById(n)};b=function(n,i){var e=n||{},f,r;f=i===t?u.defaultOptions:i;for(r in f)f.hasOwnProperty(r)&&e[r]===t&&(e[r]=typeof f[r]!="object"||f[r]===null?f[r]:b(e[r],f[r]));return e};ki=function(t,i){t.isHTML5||o!==8?i():n.setTimeout(i,0)};cu={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1};fr=function(n,i){var r,f=!0,s=i!==t,o=u.setupOptions,e=cu;if(n===t){f=[];for(r in o)o.hasOwnProperty(r)&&f.push(r);for(r in e)e.hasOwnProperty(r)&&(typeof u[r]=="object"?f.push(r+": {...}"):u[r]instanceof Function?f.push(r+": function() {...}"):f.push(r));return u._wD(c("setup",f.join(", "))),!1}for(r in n)if(n.hasOwnProperty(r))if(typeof n[r]!="object"||n[r]===null||n[r]instanceof Array||n[r]instanceof RegExp)s&&e[i]!==t?u[i][r]=n[r]:o[r]!==t?(u.setupOptions[r]=n[r],u[r]=n[r]):e[r]===t?(st(c(u[r]===t?"setupUndef":"setupError",r),2),f=!1):u[r]instanceof Function?u[r].apply(u,n[r]instanceof Array?n[r]:[n[r]]):u[r]=n[r];else if(e[r]===t)st(c(u[r]===t?"setupUndef":"setupError",r),2),f=!1;else return fr(n[r],r);return f};p=function(){function i(n){var i=rf.call(n),r=i.length;return t?(i[1]="on"+i[1],r>3&&i.pop()):r===3&&i.push(!1),i}function r(n,i){var r=n.shift(),f=[u[i]];t?r[f](n[0],n[1]):r[f].apply(r,n)}function f(){r(i(arguments),"add")}function e(){r(i(arguments),"remove")}var t=n.attachEvent,u={add:t?"attachEvent":"addEventListener",remove:t?"detachEvent":"removeEventListener"};return{add:f,remove:e}}();ot={abort:y(function(){u._wD(this._s.id+": abort")}),canplay:y(function(){var n=this._s,i;if(n._html5_canplay)return!0;if(n._html5_canplay=!0,u._wD(n.id+": canplay"),n._onbufferchange(0),i=n._iO.position!==t&&!isNaN(n._iO.position)?n._iO.position/k:null,this.currentTime!==i){u._wD(n.id+": canplay: Setting position to "+i);try{this.currentTime=i}catch(r){u._wD(n.id+": canplay: Setting position of "+i+" failed: "+r.message,2)}}n._iO._oncanplay&&n._iO._oncanplay()}),canplaythrough:y(function(){var n=this._s;n.loaded||(n._onbufferchange(0),n._whileloading(n.bytesLoaded,n.bytesTotal,n._get_html5_duration()),n._onload(!0))}),durationchange:y(function(){var n=this._s,t;t=n._get_html5_duration();isNaN(t)||t===n.duration||(u._wD(this._s.id+": durationchange ("+t+")"+(n.duration?", previously "+n.duration:"")),n.durationEstimate=n.duration=t)}),ended:y(function(){var n=this._s;u._wD(n.id+": ended");n._onfinish()}),error:y(function(){u._wD(this._s.id+": HTML5 error, code "+this.error.code);this._s._onload(!1)}),loadeddata:y(function(){var n=this._s;u._wD(n.id+": loadeddata");n._loaded||di||(n.duration=n._get_html5_duration())}),loadedmetadata:y(function(){u._wD(this._s.id+": loadedmetadata")}),loadstart:y(function(){u._wD(this._s.id+": loadstart");this._s._onbufferchange(1)}),play:y(function(){this._s._onbufferchange(0)}),playing:y(function(){u._wD(this._s.id+": playing "+String.fromCharCode(9835));this._s._onbufferchange(0)}),progress:y(function(n){var f=this._s,t,e,o,h=0,c=n.type==="progress",i=n.target.buffered,r=n.loaded||0,s=n.total||1;if(f.buffered=[],i&&i.length){for(t=0,e=i.length;t<e;t++)f.buffered.push({start:i.start(t)*k,end:i.end(t)*k});if(h=(i.end(0)-i.start(0))*k,r=Math.min(1,h/(n.target.duration*k)),c&&i.length>1){for(o=[],e=i.length,t=0;t<e;t++)o.push(n.target.buffered.start(t)*k+"-"+n.target.buffered.end(t)*k);u._wD(this._s.id+": progress, timeRanges: "+o.join(", "))}c&&!isNaN(r)&&u._wD(this._s.id+": progress, "+Math.floor(r*100)+"% loaded")}isNaN(r)||(f._whileloading(r,s,f._get_html5_duration()),r&&s&&r===s&&ot.canplaythrough.call(this,n))}),ratechange:y(function(){u._wD(this._s.id+": ratechange")}),suspend:y(function(n){var t=this._s;u._wD(this._s.id+": suspend");ot.progress.call(this,n);t._onsuspend()}),stalled:y(function(){u._wD(this._s.id+": stalled")}),timeupdate:y(function(){this._s._onTimer()}),waiting:y(function(){var n=this._s;u._wD(this._s.id+": waiting");n._onbufferchange(1)})};wi=function(n){return n&&(n.type||n.url||n.serverURL)?n.serverURL||n.type&&tr(n.type)?!1:n.type?fi({type:n.type}):fi({url:n.url})||u.html5Only||n.url.match(/data\:/i):!1};bi=function(n){var i;return n&&(i=di?eu:u.html5.canPlayType("audio/wav")?yf:eu,n.src=i,n._called_unload!==t&&(n._called_load=!1)),nt&&(br=null),i};fi=function(n){if(!u.useHTML5Audio||!u.hasHTML5)return!1;var h=n.url||null,i=n.type||null,o=u.audioFormats,f,s,r,e;if(i&&u.html5[i]!==t)return u.html5[i]&&!tr(i);if(!ct){ct=[];for(e in o)o.hasOwnProperty(e)&&(ct.push(e),o[e].related&&(ct=ct.concat(o[e].related)));ct=new RegExp("\\.("+ct.join("|")+")(\\?.*)?$","i")}return r=h?h.toLowerCase().match(ct):null,r&&r.length?r=r[1]:i?(s=i.indexOf(";"),r=(s!==-1?i.substr(0,s):i).substr(6)):f=!1,r&&u.html5[r]!==t?f=u.html5[r]&&!tr(r):(i="audio/"+r,f=u.html5.canPlayType({type:i}),u.html5[r]=f,f=f&&u.html5[i]&&!tr(i)),f};tf=function(){function s(n){var r,f,t=!1,o=!1;if(!e||typeof e.canPlayType!="function")return t;if(n instanceof Array){for(i=0,f=n.length;i<f;i++)(u.html5[n[i]]||e.canPlayType(n[i]).match(u.html5Test))&&(o=!0,u.html5[n[i]]=!0,u.flash[n[i]]=!!n[i].match(sf));t=o}else r=e&&typeof e.canPlayType=="function"?e.canPlayType(n):!1,t=!!(r&&r.match(u.html5Test));return t}if(!u.useHTML5Audio||!u.hasHTML5)return u.html5.usingFlash=!0,g=!0,!1;var e=Audio!==t?iu&&opera.version()<10?new Audio(null):new Audio:null,n,o,f={},r,i;r=u.audioFormats;for(n in r)if(r.hasOwnProperty(n)&&(o="audio/"+n,f[n]=s(r[n].type),f[o]=f[n],n.match(sf)?(u.flash[n]=!0,u.flash[o]=!0):(u.flash[n]=!1,u.flash[o]=!1),r[n]&&r[n].related))for(i=r[n].related.length-1;i>=0;i--)f["audio/"+r[n].related[i]]=f[n],u.html5[r[n].related[i]]=f[n],u.flash[r[n].related[i]]=f[n];return f.canPlayType=e?s:null,u.html5=b(u.html5,f),u.html5.usingFlash=nf(),g=u.html5.usingFlash,!0};rt={notReady:"Unavailable - wait until onready() has fired.",notOK:"Audio support is not available.",domError:s+"exception caught while appending SWF to DOM.",spcWmode:"Removing wmode, preventing known SWF loading issue(s)",swf404:l+"Verify that %s is a valid path.",tryDebug:"Try "+s+".debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:l+"Non-HTTP page ("+e.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:l+"Special case: Waiting for SWF to load with window focus...",waitForever:l+"Waiting indefinitely for Flash (will recover if unblocked)...",waitSWF:l+"Waiting for 100% SWF load...",needFunction:l+"Function object expected for %s",badID:'Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:l+"_debug(): Current sound objects",waitOnload:l+"Waiting for window.onload()",docLoaded:l+"Document already loaded",onload:l+"initComplete(): calling soundManager.onload()",onloadOK:s+".onload() complete",didInit:l+"init(): Already called?",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:l+"Failed to remove Flash node.",shutdown:s+".disable(): Shutting down",queue:l+"Queueing %s handler",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying ."+tt.swfTimedout+" CSS...",fbLoaded:"Flash loaded",fbHandler:l+"flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:s+".load(): current URL already assigned.",badFV:s+'.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",needFlash:l+"Fatal error: Flash is needed to play some required formats, but is not available.",gotFocus:l+"Got window focus.",policy:"Enabling usePolicyFile for data access",setup:s+".setup(): allowed parameters: %s",setupError:s+'.setup(): "%s" cannot be assigned with this method.',setupUndef:s+'.setup(): Could not find option "%s"',setupLate:s+".setup(): url, flashVersion and html5Test property changes will not take effect until reboot().",noURL:l+"Flash URL required. Call soundManager.setup({url:...}) to get started.",sm2Loaded:"SoundManager 2: Ready. "+String.fromCharCode(10003),reset:s+".reset(): Removing event callbacks",mobileUA:"Mobile UA detected, preferring HTML5 by default.",globalHTML5:"Using singleton HTML5 Audio() pattern for this device.",ignoreMobile:"Ignoring mobile restrictions for this device."};c=function(){var n,i,u,r,t;if(n=rf.call(arguments),r=n.shift(),t=rt&&rt[r]?rt[r]:"",t&&n&&n.length)for(i=0,u=n.length;i<u;i++)t=t.replace("%s",n[i]);return t};ai=function(n){return o===8&&n.loops>1&&n.stream&&(h("as2loop"),n.stream=!1),n};vi=function(n,t){return n&&!n.usePolicyFile&&(n.onid3||n.usePeakData||n.useWaveformData||n.useEQData)&&(u._wD((t||"")+c("policy")),n.usePolicyFile=!0),n};st=function(n){uu&&console.warn!==t?console.warn(n):u._wD(n)};ir=function(){return!1};pu=function(n){for(var t in n)n.hasOwnProperty(t)&&typeof n[t]=="function"&&(n[t]=ir);t=null};ar=function(n){n===t&&(n=!1);(d||n)&&u.disable(n)};wu=function(n){var i=null,t;if(n)if(n.match(/\.swf(\?.*)?$/i)){if(i=n.substr(n.toLowerCase().lastIndexOf(".swf?")+4),i)return n}else n.lastIndexOf("/")!==n.length-1&&(n+="/");return t=(n&&n.lastIndexOf("/")!==-1?n.substr(0,n.lastIndexOf("/")+1):"./")+u.movieURL,u.noSWFCache&&(t+="?ts="+(new Date).getTime()),t};sr=function(){o=parseInt(u.flashVersion,10);o!==8&&o!==9&&(u._wD(c("badFV",o,yu)),u.flashVersion=o=yu);var n=u.debugMode||u.debugFlash?"_debug.swf":".swf";u.useHTML5Audio&&!u.html5Only&&u.audioFormats.mp4.required&&o<9&&(u._wD(c("needfl9")),u.flashVersion=o=9);u.version=u.versionNumber+(u.html5Only?" (HTML5-only mode)":o===9?" (AS3/Flash 9)":" (AS2/Flash 8)");o>8?(u.defaultOptions=b(u.defaultOptions,u.flash9Options),u.features.buffering=!0,u.defaultOptions=b(u.defaultOptions,u.movieStarOptions),u.filePatterns.flash9=new RegExp("\\.(mp3|"+cf.join("|")+")(\\?.*)?$","i"),u.features.movieStar=!0):u.features.movieStar=!1;u.filePattern=u.filePatterns[o!==8?"flash9":"flash8"];u.movieURL=(o===8?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",n);u.features.peakData=u.features.waveformData=u.features.eqData=o>8};au=function(n,t){if(!f)return!1;f._setPolling(n,t)};lr=function(){if(u.debugURLParam.test(oi)&&(u.setupOptions.debugMode=u.debugMode=!0),ut(u.debugID))return!1;var n,t,i,r,f;if(u.debugMode&&!ut(u.debugID)&&(!uu||!u.useConsole||!u.consoleOnly)){n=e.createElement("div");n.id=u.debugID+"-toggle";r={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001};n.appendChild(e.createTextNode("-"));n.onclick=bu;n.title="Toggle SM2 debug console";w.match(/msie 6/i)&&(n.style.position="absolute",n.style.cursor="hand");for(f in r)r.hasOwnProperty(f)&&(n.style[f]=r[f]);if(t=e.createElement("div"),t.id=u.debugID,t.style.display=u.debugMode?"block":"none",u.debugMode&&!ut(n.id)){try{i=ci();i.appendChild(n)}catch(o){throw new Error(c("domError")+" \n"+o.toString());}i.appendChild(t)}}i=null};a=this.getSoundById;h=function(n,t){return n?u._wD(c(n),t):""};bu=function(){var n=ut(u.debugID),t=ut(u.debugID+"-toggle");if(!n)return!1;ur?(t.innerHTML="+",n.style.display="none"):(t.innerHTML="-",n.style.display="block");ur=!ur};it=function(i,r,u){if(n.sm2Debugger!==t)try{sm2Debugger.handleEvent(i,r,u)}catch(f){return!1}return!0};bt=function(){var n=[];return u.debugMode&&n.push(tt.sm2Debug),u.debugFlash&&n.push(tt.flashDebug),u.useHighPerformance&&n.push(tt.highPerf),n.join(" ")};yr=function(){var t=c("fbHandler"),i=u.getMoviePercent(),n=tt,r={type:"FLASHBLOCK"};if(u.html5Only)return!1;u.ok()?(u.didFlashBlock&&u._wD(t+": Unblocked"),u.oMC&&(u.oMC.className=[bt(),n.swfDefault,n.swfLoaded+(u.didFlashBlock?" "+n.swfUnblocked:"")].join(" "))):(g&&(u.oMC.className=bt()+" "+n.swfDefault+" "+(i===null?n.swfTimedout:n.swfError),u._wD(t+": "+c("fbTimeout")+(i?" ("+c("fbLoaded")+")":""))),u.didFlashBlock=!0,at({type:"ontimeout",ignoreInit:!0,error:r}),wt(r))};er=function(n,i,r){ft[n]===t&&(ft[n]=[]);ft[n].push({method:i,scope:r||null,fired:!1})};at=function(n){if((n||(n={type:u.ok()?"onready":"ontimeout"}),!v&&n&&!n.ignoreInit)||n.type==="ontimeout"&&(u.ok()||d&&!n.ignoreInit))return!1;var o={success:n&&n.ignoreInit?u.ok():!d},f=n&&n.type?ft[n.type]||[]:[],i=[],t,r,e=[o],s=g&&!u.ok();for(n.error&&(e[0].error=n.error),t=0,r=f.length;t<r;t++)f[t].fired!==!0&&i.push(f[t]);if(i.length)for(t=0,r=i.length;t<r;t++)i[t].scope?i[t].method.apply(i[t].scope,e):i[t].method.apply(this,e),s||(i[t].fired=!0);return!0};yt=function(){n.setTimeout(function(){u.useFlashBlock&&yr();at();typeof u.onload=="function"&&(h("onload",1),u.onload.apply(n),h("onloadOK",1));u.waitForWindowLoad&&p.add(n,"load",yt)},1)};kr=function(){if(et!==t)return et;var r=!1,e=navigator,o=e.plugins,u,f,i,s=n.ActiveXObject;if(o&&o.length)f="application/x-shockwave-flash",i=e.mimeTypes,i&&i[f]&&i[f].enabledPlugin&&i[f].enabledPlugin.description&&(r=!0);else if(s!==t&&!w.match(/MSAppHost/i)){try{u=new s("ShockwaveFlash.ShockwaveFlash")}catch(h){u=null}r=!!u;u=null}return et=r,r};nf=function(){var i,n,t=u.audioFormats,r=nu&&!!w.match(/os (1|2|3_0|3_1)\s/i);if(r?(u.hasHTML5=!1,u.html5Only=!0,u.oMC&&(u.oMC.style.display="none")):u.useHTML5Audio&&(u.html5&&u.html5.canPlayType||(u._wD("SoundManager: No HTML5 Audio() support detected."),u.hasHTML5=!1),ru&&u._wD(l+"Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(et?"will use flash fallback for MP3/MP4, if available":" would use flash fallback for MP3/MP4, but none detected."),1)),u.useHTML5Audio&&u.hasHTML5){ui=!0;for(n in t)t.hasOwnProperty(n)&&t[n].required&&(u.html5.canPlayType(t[n].type)?u.preferFlash&&(u.flash[n]||u.flash[t[n].type])&&(i=!0):(ui=!1,i=!0))}return u.ignoreFlash&&(i=!1,ui=!0),u.html5Only=u.hasHTML5&&u.useHTML5Audio&&!i,!u.html5Only};pi=function(n){var t,f,i=0,r;if(n instanceof Array){for(t=0,f=n.length;t<f;t++)if(n[t]instanceof Object){if(u.canPlayMIME(n[t].type)){i=t;break}}else if(u.canPlayURL(n[t])){i=t;break}n[i].url&&(n[i]=n[i].url);r=n[i]}else r=n;return r};ku=function(n){n._hasTimer||(n._hasTimer=!0,!gi&&u.html5PollingInterval&&(ri===null&&yi===0&&(ri=setInterval(gu,u.html5PollingInterval)),yi++))};du=function(n){n._hasTimer&&(n._hasTimer=!1,!gi&&u.html5PollingInterval&&yi--)};gu=function(){var n;if(ri!==null&&!yi)return clearInterval(ri),ri=null,!1;for(n=u.soundIDs.length-1;n>=0;n--)u.sounds[u.soundIDs[n]].isHTML5&&u.sounds[u.soundIDs[n]]._hasTimer&&u.sounds[u.soundIDs[n]]._onTimer()};wt=function(i){i=i!==t?i:{};typeof u.onerror=="function"&&u.onerror.apply(n,[{type:i.type!==t?i.type:null}]);i.fatal!==t&&i.fatal&&u.disable()};uf=function(){if(!ru||!kr())return!1;var t=u.audioFormats,i;for(var n in t)if(t.hasOwnProperty(n)&&(n==="mp3"||n==="mp4")&&(u._wD(s+": Using flash fallback for "+n+" format"),u.html5[n]=!1,t[n]&&t[n].related))for(i=t[n].related.length-1;i>=0;i--)u.html5[t[n].related[i]]=!1};this._setSandboxType=function(n){var i=u.sandbox;i.type=n;i.description=i.types[i.types[n]!==t?n:"unknown"];i.type==="localWithFile"?(i.noRemote=!0,i.noLocal=!1,h("secNote",2)):i.type==="localWithNetwork"?(i.noRemote=!1,i.noLocal=!0):i.type==="localTrusted"&&(i.noRemote=!1,i.noLocal=!1)};this._externalInterfaceOK=function(n){if(u.swfLoaded)return!1;var t;if(it("swf",!0),it("flashtojs",!0),u.swfLoaded=!0,nr=!1,ru&&uf(),!n||n.replace(/\+dev/i,"")!==u.versionNumber.replace(/\+dev/i,""))return t=s+': Fatal: JavaScript file build "'+u.versionNumber+'" does not match Flash SWF build "'+n+'" at '+u.url+". Ensure both are up-to-date.",setTimeout(function(){throw new Error(t);},0),!1;setTimeout(rr,lt?100:1)};li=function(n,i){function d(){var n=[],i,t=[],r=" + ";i="SoundManager "+u.version+(!u.html5Only&&u.useHTML5Audio?u.hasHTML5?" + HTML5 audio":", no HTML5 audio support":"");u.html5Only?u.html5PollingInterval&&n.push("html5PollingInterval ("+u.html5PollingInterval+"ms)"):(u.preferFlash&&n.push("preferFlash"),u.useHighPerformance&&n.push("useHighPerformance"),u.flashPollingInterval&&n.push("flashPollingInterval ("+u.flashPollingInterval+"ms)"),u.html5PollingInterval&&n.push("html5PollingInterval ("+u.html5PollingInterval+"ms)"),u.wmode&&n.push("wmode ("+u.wmode+")"),u.debugFlash&&n.push("debugFlash"),u.useFlashBlock&&n.push("flashBlock"));n.length&&(t=t.concat([n.join(r)]));u._wD(i+(t.length?r+t.join(", "):""),1);ff()}function s(n,t){return'<param name="'+n+'" value="'+t+'" />'}if(kt&&dt)return!1;if(u.html5Only)return sr(),d(),u.oMC=ut(u.movieID),rr(),kt=!0,dt=!0,!1;var g=i||u.url,it=u.altURL||g,y=ci(),l=bt(),nt=null,p=e.getElementsByTagName("html")[0],r,h,a,b,o,f,v,k;if(nt=p&&p.dir&&p.dir.match(/rtl/i),n=n===t?u.id:n,sr(),u.url=wu(ei?g:it),i=u.url,u.wmode=!u.wmode&&u.useHighPerformance?"transparent":u.wmode,u.wmode!==null&&(w.match(/msie 8/i)||!lt&&!u.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(ht.push(rt.spcWmode),u.wmode=null),r={name:n,id:n,src:i,quality:"high",allowScriptAccess:u.allowScriptAccess,bgcolor:u.bgColor,pluginspage:pf+"www.macromedia.com/go/getflashplayer",title:"JS/Flash audio component (SoundManager 2)",type:"application/x-shockwave-flash",wmode:u.wmode,hasPriority:"true"},u.debugFlash&&(r.FlashVars="debug=1"),u.wmode||delete r.wmode,lt)h=e.createElement("div"),b=['<object id="'+n+'" data="'+i+'" type="'+r.type+'" title="'+r.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',s("movie",i),s("AllowScriptAccess",u.allowScriptAccess),s("quality",r.quality),u.wmode?s("wmode",u.wmode):"",s("bgcolor",u.bgColor),s("hasPriority","true"),u.debugFlash?s("FlashVars",r.FlashVars):"","<\/object>"].join("");else{h=e.createElement("embed");for(a in r)r.hasOwnProperty(a)&&h.setAttribute(a,r[a])}if(lr(),l=bt(),y=ci(),y)if(u.oMC=ut(u.movieID)||e.createElement("div"),u.oMC.id)k=u.oMC.className,u.oMC.className=(k?k+" ":tt.swfDefault)+(l?" "+l:""),u.oMC.appendChild(h),lt&&(o=u.oMC.appendChild(e.createElement("div")),o.className=tt.swfBox,o.innerHTML=b),dt=!0;else{if(u.oMC.id=u.movieID,u.oMC.className=tt.swfDefault+" "+l,f=null,o=null,u.useFlashBlock||(u.useHighPerformance?f={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(f={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},nt&&(f.left=Math.abs(parseInt(f.left,10))+"px"))),vf&&(u.oMC.style.zIndex=1e4),!u.debugFlash)for(v in f)f.hasOwnProperty(v)&&(u.oMC.style[v]=f[v]);try{lt||u.oMC.appendChild(h);y.appendChild(u.oMC);lt&&(o=u.oMC.appendChild(e.createElement("div")),o.className=tt.swfBox,o.innerHTML=b);dt=!0}catch(ft){throw new Error(c("domError")+" \n"+ft.toString());}}return kt=!0,d(),!0};hi=function(){return u.html5Only?(li(),!1):f?!1:u.url?(f=u.getMovie(u.id),f||(ti?(lt?u.oMC.innerHTML=vr:u.oMC.appendChild(ti),ti=null,kt=!0):li(u.id,u.url),f=u.getMovie(u.id)),typeof u.oninitmovie=="function"&&setTimeout(u.oninitmovie,1),dr(),!0):(h("noURL"),!1)};pt=function(){setTimeout(lu,1e3)};or=function(){n.setTimeout(function(){st(l+"useFlashBlock is false, 100% HTML5 mode is possible. Rebooting with preferFlash: false...");u.setup({preferFlash:!1}).reboot();u.didFlashBlock=!0;u.beginDelayedInit()},1)};lu=function(){var t,i=!1;if(!u.url||ii)return!1;if(ii=!0,p.remove(n,"load",pt),et&&nr&&!fu)return h("waitFocus"),!1;v||(t=u.getMoviePercent(),t>0&&t<100&&(i=!0));setTimeout(function(){if(t=u.getMoviePercent(),i)return ii=!1,u._wD(c("waitSWF")),n.setTimeout(pt,1),!1;v||(u._wD(s+": No Flash response within expected time. Likely causes: "+(t===0?"SWF load failed, ":"")+"Flash blocked or JS-Flash security error."+(u.debugFlash?" "+c("checkSWF"):""),2),!ei&&t&&(h("localFail",2),u.debugFlash||h("tryDebug",2)),t===0&&u._wD(c("swf404",u.url),1),it("flashtojs",!1,": Timed out"+(ei?" (Check flash security or flash blockers)":" (No plugin/missing SWF?)")));!v&&of&&(t===null?u.useFlashBlock||u.flashLoadTimeout===0?(u.useFlashBlock&&yr(),h("waitForever")):!u.useFlashBlock&&ui?or():(h("waitForever"),at({type:"ontimeout",ignoreInit:!0,error:{type:"INIT_FLASHBLOCK"}})):u.flashLoadTimeout===0?h("waitForever"):!u.useFlashBlock&&ui?or():ar(!0))},u.flashLoadTimeout)};hr=function(){function t(){p.remove(n,"focus",hr)}return fu||!nr?(t(),!0):(of=!0,fu=!0,h("gotFocus"),ii=!1,pt(),t(),!0)};dr=function(){ht.length&&(u._wD("SoundManager 2: "+ht.join(" "),1),ht=[])};ff=function(){dr();var n,t=[];if(u.useHTML5Audio&&u.hasHTML5){for(n in u.audioFormats)u.audioFormats.hasOwnProperty(n)&&t.push(n+" = "+u.html5[n]+(!u.html5[n]&&g&&u.flash[n]?" (using flash)":u.preferFlash&&u.flash[n]&&g?" (preferring flash)":u.html5[n]?"":" ("+(u.audioFormats[n].required?"required, ":"")+"and no flash support)"));u._wD("SoundManager 2 HTML5 support: "+t.join(", "),1)}};gt=function(t){if(v)return!1;if(u.html5Only)return h("sm2Loaded",1),v=!0,yt(),it("onload",!0),!0;var f=u.useFlashBlock&&u.flashLoadTimeout&&!u.getMoviePercent(),r=!0,i;return f||(v=!0),i={type:!et&&g?"NO_FLASH":"INIT_TIMEOUT"},u._wD("SoundManager 2 "+(d?"failed to load":"loaded")+" ("+(d?"Flash security/load error":"OK")+") "+String.fromCharCode(d?10006:10003),d?2:1),d||t?(u.useFlashBlock&&u.oMC&&(u.oMC.className=bt()+" "+(u.getMoviePercent()===null?tt.swfTimedout:tt.swfError)),at({type:"ontimeout",error:i,ignoreInit:!0}),it("onload",!1),wt(i),r=!1):it("onload",!0),d||(u.waitForWindowLoad&&!si?(h("waitOnload"),p.add(n,"load",yt)):(u.waitForWindowLoad&&si&&h("docLoaded"),yt())),r};hu=function(){var n,i=u.setupOptions;for(n in i)i.hasOwnProperty(n)&&(u[n]===t?u[n]=i[n]:u[n]!==i[n]&&(u.setupOptions[n]=u[n]))};rr=function(){function t(){p.remove(n,"load",u.beginDelayedInit)}if(v)return h("didInit"),!1;if(u.html5Only)return v||(t(),u.enabled=!0,gt()),!0;hi();try{f._externalInterfaceTest(!1);au(!0,u.flashPollingInterval||(u.useHighPerformance?10:50));u.debugMode||f._disableDebug();u.enabled=!0;it("jstoflash",!0);u.html5Only||p.add(n,"unload",ir)}catch(i){return u._wD("js/flash exception: "+i.toString()),it("jstoflash",!1),wt({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),ar(!0),gt(),!1}return gt(),t(),!0};vt=function(){return ni?!1:(ni=!0,hu(),lr(),!et&&u.hasHTML5&&(u._wD("SoundManager 2: No Flash detected"+(u.useHTML5Audio?". Trying HTML5-only mode.":", enabling HTML5."),1),u.setup({useHTML5Audio:!0,preferFlash:!1})),tf(),!et&&g&&(ht.push(rt.needFlash),u.setup({flashLoadTimeout:1})),e.removeEventListener&&e.removeEventListener("DOMContentLoaded",vt,!1),hi(),!0)};wr=function(){return e.readyState==="complete"&&(vt(),e.detachEvent("onreadystatechange",wr)),!0};cr=function(){si=!0;vt();p.remove(n,"load",cr)};kr();p.add(n,"focus",hr);p.add(n,"load",pt);p.add(n,"load",cr);e.addEventListener?e.addEventListener("DOMContentLoaded",vt,!1):e.attachEvent?e.attachEvent("onreadystatechange",wr):(it("onload",!1),wt({type:"NO_DOM2_EVENTS",fatal:!0}))}if(!n||!n.document)throw new Error("SoundManager requires a browser with window and document objects.");var r=null;n.SM2_DEFER!==t&&SM2_DEFER||(r=new i);typeof module=="object"&&module&&typeof module.exports=="object"?(module.exports.SoundManager=i,module.exports.soundManager=r):typeof define=="function"&&define.amd&&define(function(){function t(t){if(!n.soundManager&&t instanceof Function){var r=t(i);r instanceof i&&(n.soundManager=r)}return n.soundManager}return{constructor:i,getInstance:t}});n.SoundManager=i;n.soundManager=r})(window),function(n){var t=function(){function n(){}return n}();t.E_NOTIMPL=2147500033;n.__HResults=t}(System||(System={}));__extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},function(n){var t=function(n){function t(t){var i=n.call(this,t)||this;return i.helpLink="",i}return __extends(t,n),Object.defineProperty(t.prototype,"helpLink",{get:function(){return this._helpLink},set:function(n){n&&(this._helpLink=n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hResult",{get:function(){return this._hResult},enumerable:!0,configurable:!0}),t.prototype.setErrorCode=function(n){this._hResult=n},t}(Error);n.Exception=t}(System||(System={}));__extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},function(n){var t=function(t){function i(r){var u=t.call(this,r?r:i.Arg_NotImplementedException)||this;return u.name="NotImplementedException",u.stack=(new Error).stack,u.setErrorCode(n.__HResults.E_NOTIMPL),u}return __extends(i,t),i}(n.Exception);t.Arg_NotImplementedException="The method or operation is not implemented.";n.NotImplementedException=t}(System||(System={})),function(n){var l=function(){function n(){}return n.compare=function(n){var t;return function(i,r){return t=i[n]<r[n]?-1:i[n]>r[n]?1:0}},n.shuffle=function(n){for(var i,r,t=n.length-1;t>0;t--)i=Math.floor(Math.random()*(t+1)),r=n[t],n[t]=n[i],n[i]=r;return n},n}(),i,r,t,u,f,e,o,s,h,c;n.ArrayUtils=l;i=function(){function t(){}return t.addClass=function(n,i){return t.addClassInternal(n,i)},t.addClassInternal=function(n,t){if(!n||!t||this.hasClassInternal(n,t))return!1;n.className=(n.className?n.className+" ":"")+t},t.removeClass=function(n,i){return t.removeClassInternal(n,i)},t.removeClassInternal=function(n,i){if(!n||!i||!t.hasClassInternal(n,i))return!1;n.className=n.className.replace(new RegExp("( "+i+")|("+i+")","g"),"")},t.swapClass=function(n,i,r){var u={className:n.className};t.removeClassInternal(u,i);t.addClassInternal(u,r);n.className=u.className},t.hasClass=function(n,i){return t.hasClassInternal(n,i)},t.hasClassInternal=function(n,t){return n.className!==undefined?new RegExp("(^|\\s)"+t+"(\\s|$)").test(n.className):!1},t.toggleClass=function(t,i){var r,u;return r=n.CssUtils.hasClass(t,i),u=r?n.CssUtils.removeClass:n.CssUtils.addClass,u(t,i),!r},t}();n.CssUtils=i;r=function(){function n(){}return n.ancestor=function(n,t,i){if(!t||!n||(n=n.toUpperCase(),i&&t&&t.nodeName===n))return t;while(t&&t.nodeName!==n&&t.parentNode)t=t.parentNode;return t&&t.nodeName===n?t:null},n.get=function(){var n=this.getAll.apply(this,arguments);return n&&n.length?n[n.length-1]:n&&n.length===0?null:n},n.getAll=function(n,t){var i,r,u;return arguments.length===1?(i=document.documentElement,r=n):(i=n,r=t),i&&i.querySelectorAll&&(u=i.querySelectorAll(r)),u},n}();n.DomUtils=r;t=function(){function n(){}return n}();n.EventAddResult=t;u=function(){function n(){}return n.add=function(n,i,r){var u=new t;return u.detach=this.remove(n,i,r),window.addEventListener?n.addEventListener(i,r,!1):n.attachEvent("on"+i,r),u},n.remove=function(){return function(n,t,i){return window.removeEventListener!==undefined?n.removeEventListener(t,i,!1):n.detachEvent("on"+t,i)}},n.preventDefault=function(n){return n.preventDefault?n.preventDefault():(n.returnValue=!1,n.cancelBubble=!0),!1},n}();n.EventUtils=u;f=function(){function n(){}return n}();n.CssTransformSupport=f;e=function(){function n(){}return n}();n.CssRotateSupport=e;o=function(){function n(){}return n}();n.LocalFeatureSupport=o;s=function(){function n(){this.testDiv=document.createElement("div");this.localFeatures={transform:{ie:this.has("-ms-transform"),moz:this.has("MozTransform"),opera:this.has("OTransform"),webkit:this.has("webkitTransform"),w3:this.has("transform"),prop:null},rotate:{has3D:!1,prop:null},getAnimationFrame:this.getAnimationFrame};this.localAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||null;this.localFeatures.transform.prop=this.localFeatures.transform.w3||this.localFeatures.transform.moz||this.localFeatures.transform.webkit||this.localFeatures.transform.ie||this.localFeatures.transform.opera;this.localFeatures.transform.prop&&(this.transform=this.localFeatures.transform.prop,this.styles={css_2d:"rotate(0deg)",css_3d:"rotate3d(0,0,0,0deg)"},this.attempt(this.styles.css_3d)?(this.localFeatures.rotate.has3D=!0,this.prop="rotate3d"):this.attempt(this.styles.css_2d)&&(this.prop="rotate"),this.localFeatures.rotate.prop=this.prop);this.testDiv=null}return n.prototype.has=function(n){var t=this.testDiv.style[n];return t!==undefined?n:null},n.prototype.attempt=function(n){try{this.testDiv.style[this.transform]=n}catch(t){return!1}return!!this.testDiv.style[this.transform]},n.prototype.features=function(){return this.localFeatures},n.prototype.getAnimationFrame=function(){return this.localAnimationFrame?function(){return this.localAnimationFrame.apply(window,arguments)}:null},n}();n.FeatureUtils=s;h=function(){function n(){}return n.getOffX=function(n){var t=0;if(n.offsetParent)while(n.offsetParent)t+=n.offsetLeft,n=n.offsetParent;else n.x&&(t+=n.x);return t},n.getOffY=function(n){var t=0;if(n.offsetParent)while(n.offsetParent)t+=n.offsetTop,n=n.offsetParent;else n.y&&(t+=n.y);return t},n}();n.PositionUtils=h;c=function(){function n(){}return n.get=function(n,t){var i;return n.currentStyle?i=n.currentStyle[t]:window.getComputedStyle&&(i=document.defaultView.getComputedStyle(n,null).getPropertyValue(t)),i},n}();n.StyleUtils=c}(Sm2ShimUtils||(Sm2ShimUtils={})),function(n){var t;(function(n){var i=function(){function n(){}return n}(),t;n.Sm2PlayerOption=i;t=function(){function n(){}return n}();n.SoundManagerSetupOption=t})(t=n.Options||(n.Options={}))}(Sm2Shim||(Sm2Shim={})),function(n){var t;(function(t){var i=Sm2ShimUtils.CssUtils,u=Sm2ShimUtils.DomUtils,r=Sm2ShimUtils.EventUtils,f=Sm2ShimUtils.PositionUtils,e=Sm2ShimUtils.StyleUtils,o=function(){function o(n){var f=this,e;this.css={disabled:"disabled",selected:"selected",active:"active",legacy:"legacy",noVolume:"no-volume",playlistOpen:"playlist-open"};this.extras={loadFailedCharacter:'<span title="Failed to load/play." class="load-error"><\/span>'};this.playerOptions={stopOtherSounds:!0,excludeClass:"sm2-exclude"};this.failureCount=0;this.failureThreshold=5;this.dom={o:null,playlist:null,playlistTarget:null,playlistContainer:null,time:null,player:null,progress:null,progressTrack:null,progressBar:null,duration:null,volume:null};this.self=this;this.actionData={volume:{x:0,y:0,width:0,height:0,backgroundSize:0}};this.actions={play:function(n){var r,t,i;if(n!==undefined&&!isNaN(n))return this.self.playlistController.playItemByOffset(n);i=n;i&&i.target&&(r=i.target||i.srcElement,t=r.href);t&&t.indexOf("#")===-1||(t=this.self.dom.playlist.getElementsByTagName("a")[0].href);this.self.soundObject||(this.self.soundObject=this.self.makeSound(t));this.self.soundObject.playState||this.self.stopOtherSounds();this.self.soundObject.togglePause();this.self.soundObject.paused&&this.self.playlistController.data.timer&&(window.clearTimeout(this.self.playlistController.data.timer),this.self.playlistController.data.timer=null)},pause:function(){f.self.soundObject&&f.self.soundObject.readyState&&f.self.soundObject.pause()},resume:function(){f.self.soundObject&&f.self.soundObject.readyState&&f.self.soundObject.resume()},stop:function(){return f.actions.pause()},next:function(){var n,t;f.playlistController.data.timer&&(window.clearTimeout(f.playlistController.data.timer),f.playlistController.data.timer=null);t=f.playlistController.data.selectedIndex;n=f.playlistController.getNext();n&&f.playlistController.data.selectedIndex!==t&&f.playLink(n.getElementsByTagName("a")[0])},prev:function(){var n,t;t=f.playlistController.data.selectedIndex;n=f.playlistController.getPrevious();n&&f.playlistController.data.selectedIndex!==t&&f.playLink(n.getElementsByTagName("a")[0])},shuffle:function(){throw new System.NotImplementedException;},repeat:function(n){var t=n?n.target||n.srcElement:u.get(f.dom.o,".repeat");t&&!i.hasClass(t,f.css.disabled)&&(i.toggleClass(t.parentNode,f.css.active),f.playlistController.data.loopMode=!f.playlistController.data.loopMode)},menu:function(n){var t;t=i.hasClass(f.dom.o,f.css.playlistOpen);!f.playlistController||f.playlistController.data.selectedIndex||f.firstOpen||(f.dom.playlist.scrollTop=0,f.firstOpen=!0);typeof n=="boolean"&&n||(t||(f.dom.playlistContainer.style.height="0px"),t=i.toggleClass(f.dom.o,f.css.playlistOpen));f.dom.playlistContainer.style.height=(t?f.dom.playlistContainer.scrollHeight:0)+"px"},adjustVolume:function(n){var t,i,f,u,e;return(f=this.dom.volume,n===undefined)?!1:!n||n.clientX===undefined?(arguments.length&&window.console&&window.console.warn&&console.warn("Bar UI: call setVolume("+n+") instead of adjustVolume("+n+")."),this.actions.setVolume.apply(this,arguments)):(t=(100-this.actionData.volume.backgroundSize)/2,e=Math.max(0,Math.min(1,(n.clientX-this.actionData.volume.x)/this.actionData.volume.width)),f.style.clip="rect(0px, "+this.actionData.volume.width*e+"px, "+this.actionData.volume.height+"px, "+this.actionData.volume.width*(t/100)+"px)",i=t/100*this.actionData.volume.width,u=Math.max(0,Math.min(1,(n.clientX-this.actionData.volume.x-i)/(this.actionData.volume.width-i*2)))*100,this.soundObject&&this.soundObject.setVolume(u),this.defaultVolume=u,r.preventDefault(n))},releaseVolume:function(){r.remove(document,"mousemove",this.actions.adjustVolume);r.remove(document,"mouseup",this.actions.releaseVolume)},setVolume:function(n){var r,u,t,f,i,e;n===undefined||isNaN(n)||(this.dom.volume&&(f=this.dom.volume,r=this.actionData.volume.backgroundSize,u=(100-r)/2,t=this.actionData.volume.width*(u/100),i=t,e=i+(this.actionData.volume.width-t*2)*(n/100),f.style.clip="rect(0px, "+e+"px, "+this.actionData.volume.height+"px, "+i+"px)"),this.soundObject&&this.soundObject.setVolume(n),this.defaultVolume=n)},self:this};this.playerNode=n;this.defaultVolume=soundManager.defaultOptions.volume;window.sm2BarPlayerOptions=this.playerOptions;this.playerNode||console.warn("Sm2Player.constructor(): No playerNode element?");this.dom.o=n;window.navigator.userAgent.match(/msie [678]/i)&&i.addClass(this.dom.o,this.css.legacy);window.navigator.userAgent.match(/mobile/i)&&i.addClass(this.dom.o,this.css.noVolume);this.dom.progress=u.get(this.dom.o,".sm2-progress-ball");this.dom.progressTrack=u.get(this.dom.o,".sm2-progress-track");this.dom.progressBar=u.get(this.dom.o,".sm2-progress-bar");this.dom.volume=u.get(this.dom.o,"a.sm2-volume-control");this.dom.duration=u.get(this.dom.o,".sm2-inline-duration");this.dom.time=u.get(this.dom.o,".sm2-inline-time");this.playlistController=new t.Sm2PlaylistController(this,this.dom,this.css);e=this.playlistController.getItem(0);this.playlistController.select(e);e&&this.setTitle(e);r.add(this.dom.o,"mousedown",function(n){f.handleMouseDown(n)});r.add(this.dom.o,"click",function(n){f.handleClick(n)});r.add(this.dom.progressTrack,"mousedown",function(n){return this.isRightClick(n)?!0:(i.addClass(this.dom.o,"grabbing"),r.add(document,"mousemove",this.handleMouse),r.add(document,"mouseup",this.releaseMouse),this.handleMouse(n))});window.navigator.userAgent.match(/mobile/i)||i.hasClass(this.dom.o,"auto-play")&&window.setTimeout(function(){f.playlistController.playItemByOffset(0)},2);i.hasClass(this.dom.o,"repeat-playback")&&window.setTimeout(function(){f.playlistController.data.loopMode=!0;i.toggleClass(u.get(f.dom.o,".sm2-icon-repeat").parentNode,f.css.active)},2)}return o.prototype.stopOtherSounds=function(){this.playerOptions.stopOtherSounds&&soundManager.stopAll()},o.prototype.playLink=function(n){soundManager.canPlayURL(n.href)&&(this.playlistController.data.timer&&(window.clearTimeout(this.playlistController.data.timer),this.playlistController.data.timer=null),this.soundObject||(this.soundObject=this.makeSound(n.href)),this.soundObject.stop(),this.playlistController.select(n.parentNode),this.setTitle(n.parentNode),this.dom.progress.style.left="0px",this.dom.progressBar.style.width="0px",this.stopOtherSounds(),this.soundObject.play({url:n.href,position:0}))},o.prototype.makeSound=function(t){var r=this,f=this;return soundManager.createSound({url:t,volume:this.defaultVolume,whileplaying:function(){var t=100,i,r;i=Math.min(t,Math.max(0,t*(this.position/this.durationEstimate)))+"%";r=Math.min(100,Math.max(0,100*this.position/this.durationEstimate))+"%";this.duration&&(f.dom.progress.style.left=i,f.dom.progressBar.style.width=r,f.dom.time.innerHTML=n.Player.Sm2Player.getTime(this.position,!0))},whileloading:function(){this.isHTML5||(f.dom.duration.innerHTML=n.Player.Sm2Player.getTime(this.durationEstimate,!0))},onbufferchange:function(n){(n?i.addClass:i.removeClass)(r.dom.o,"buffering")},onplay:function(){i.swapClass(r.dom.o,"paused","playing");r.callback("play")},onpause:function(){i.swapClass(r.dom.o,"playing","paused");r.callback("pause")},onresume:function(){i.swapClass(r.dom.o,"paused","playing")},onload:function(t){t?(f.dom.duration.innerHTML=n.Player.Sm2Player.getTime(this.duration,!0),f.failureCount=0):this._iO&&this._iO.onerror&&this._iO.onerror()},onerror:function(){r.failureCount++;r.failureCount>=r.failureThreshold&&r.playlistController.data.loopMode&&(r.playlistController.data.loopMode=!1,i.toggleClass(u.get(r.dom.o,".sm2-icon-repeat").parentNode,r.css.active));var f,n,t;f=r.playlistController.getItem();f&&r.extras.loadFailedCharacter&&(r.dom.playlistTarget.innerHTML=r.dom.playlistTarget.innerHTML.replace("<li>","<li>"+r.extras.loadFailedCharacter+" "),r.playlistController.data.playlist&&r.playlistController.data.playlist[r.playlistController.data.selectedIndex]&&(n=r.playlistController.data.playlist[r.playlistController.data.selectedIndex].getElementsByTagName("a")[0],t=n.innerHTML,t.indexOf(r.extras.loadFailedCharacter)===-1&&(n.innerHTML=r.extras.loadFailedCharacter+" "+t)));r.callback("error");navigator.userAgent.match(/mobile/i)?r.actions.next():(r.playlistController.data.timer&&window.clearTimeout(r.playlistController.data.timer),r.playlistController.data.timer=window.setTimeout(r.actions.next,2e3))},onstop:function(){i.removeClass(r.dom.o,"playing")},onfinish:function(){var t,n;i.removeClass(f.dom.o,"playing");f.dom.progress.style.left="0%";t=f.playlistController.data.selectedIndex;f.callback("finish");n=f.playlistController.getNext();n&&f.playlistController.data.selectedIndex!==t||n&&f.playlistController.data.loopMode?(f.playlistController.select(n),f.setTitle(n),f.stopOtherSounds(),this.play({url:f.playlistController.getURL()})):f.callback("end")}})},o.prototype.setTitle=function(n){var t=n.getElementsByTagName("a");t.length&&(n=t[0]);this.dom.playlistTarget.innerHTML='<ul class="sm2-playlist-bd"><li>'+n.innerHTML.replace(this.extras.loadFailedCharacter,"")+"<\/li><\/ul>";this.dom.playlistTarget.getElementsByTagName("li")[0].scrollWidth>this.dom.playlistTarget.offsetWidth&&(this.dom.playlistTarget.innerHTML='<ul class="sm2-playlist-bd"><li><marquee>'+n.innerHTML+"<\/marquee><\/li><\/ul>")},o.getTime=function(n,t){var f=Math.floor(n/1e3),i=Math.floor(f/3600),r=Math.floor(f/60)-Math.floor(i*60),u=Math.floor(f-i*3600-r*60);return t?(i?i+":":"")+(i&&r<10?"0"+r:r)+":"+(u<10?"0"+u:u):{min:r,sec:u}},o.prototype.callback=function(n){n&&this.on&&this.on[n]&&this.on[n](this)},o.isRightClick=function(n){if(n&&(n.which&&n.which===2||n.which===undefined&&n.button!==1))return!0},o.prototype.getActionData=function(n){if(!n)return!1;this.actionData.volume.x=f.getOffX(n);this.actionData.volume.y=f.getOffY(n);this.actionData.volume.width=n.offsetWidth;this.actionData.volume.height=n.offsetHeight;this.actionData.volume.backgroundSize=parseInt(e.get(n,"background-size"),10);window.navigator.userAgent.match(/msie|trident/i)&&(this.actionData.volume.backgroundSize=this.actionData.volume.backgroundSize/this.actionData.volume.width*100)},o.prototype.handleMouse=function(n){var i,r,u,e,o,t;return i=this.dom.progressTrack,r=f.getOffX(i),u=i.offsetWidth,e=n.clientX-r,o=e/u,t=this.soundObject,t&&t.duration&&(t.setPosition(t.duration*o),t._iO&&t._iO.whileplaying&&t._iO.whileplaying.apply(t)),n.preventDefault&&n.preventDefault(),!1},o.prototype.handleMouseDown=function(n){var u,t;return(t=n.target||n.srcElement,o.isRightClick(n))?!0:(t.nodeName.toLowerCase()!=="a"&&(u=t.getElementsByTagName("a"),u&&u.length&&(t=t.getElementsByTagName("a")[0])),i.hasClass(t,"sm2-volume-control")?(this.getActionData(t),r.add(document,"mousemove",this.actions.adjustVolume),r.add(document,"mouseup",this.actions.releaseVolume),this.actions.adjustVolume(n)):void 0)},o.prototype.releaseMouse=function(n){return r.remove(document,"mousemove",this.handleMouse),i.removeClass(this.dom.o,"grabbing"),r.remove(document,"mouseup",this.releaseMouse),r.preventDefault(n),!1},o.prototype.handleClick=function(n){var f,t,o,u,e,h,s;if(f=n||window.event,t=f.target||f.srcElement,t&&t.nodeName){if(u=t.nodeName.toLowerCase(),u!=="a"&&t.parentNode){do t=t.parentNode,u=t.nodeName.toLowerCase();while(u!=="a"&&t.parentNode);if(!t)return!1}if(u==="a"&&(h=t.href,soundManager.canPlayURL(h)?i.hasClass(t,this.playerOptions.excludeClass)||(this.playLink(t),s=!0):(o=t.href.lastIndexOf("#"),o!==-1&&(e=t.href.substr(o+1),e&&this.actions[e]&&(s=!0,this.actions[e](n)))),s))return r.preventDefault(f)}},o}();t.Sm2Player=o})(t=n.Player||(n.Player={}))}(Sm2Shim||(Sm2Shim={})),function(n){var t;(function(n){var t=Sm2ShimUtils.DomUtils,i=Sm2ShimUtils.CssUtils,r=function(){function n(n,t,i){this.data={playlist:null,selectedIndex:0,loopMode:!1,timer:null};this.player=n;this.dom=t;this.css=i;this.defaultVolume=soundManager.defaultOptions.volume;this.initDOM();this.refreshDOM();Sm2ShimUtils.CssUtils.hasClass(this.dom.o,this.css.playlistOpen)&&window.setTimeout(function(){},1)}return n.prototype.getPlaylist=function(){return this.data.playlist},n.prototype.getItem=function(n){var t;return this.data.selectedIndex===null?n:(t=this.getPlaylist(),n=n!==undefined?n:this.data.selectedIndex,n=Math.max(0,Math.min(n,t.length)),t[n])},n.prototype.getNext=function(){return this.data.selectedIndex!==null&&this.data.selectedIndex++,this.data.playlist.length>1?this.data.selectedIndex>=this.data.playlist.length&&(this.data.loopMode?this.data.selectedIndex=0:this.data.selectedIndex--):this.data.selectedIndex=this.data.loopMode?0:null,this.getItem()},n.prototype.getPrevious=function(){return this.data.selectedIndex--,this.data.selectedIndex<0&&(this.data.loopMode?this.data.selectedIndex=this.data.playlist.length-1:this.data.selectedIndex++),this.getItem()},n.prototype.getURL=function(){var n,t;return n=this.getItem(),n&&(t=n.getElementsByTagName("a")[0].href),t},n.prototype.playItemByOffset=function(n){n=n||0;var t=this.getItem(n);t&&this.player.playLink(t.getElementsByTagName("a")[0])},n.prototype.select=function(n){var h,r,u,f,e,o,s;this.resetLastSelected();n&&(s=t.ancestor("li",n),i.addClass(s,this.css.selected),r=n.offsetTop,u=r+n.offsetHeight,f=this.dom.playlistContainer.offsetHeight,e=this.dom.playlist.scrollTop,o=8,u>f+e?this.dom.playlist.scrollTop=u-f+o:r<e&&(this.dom.playlist.scrollTop=n.offsetTop-o));h=this.findOffsetFromItem(s);this.data.selectedIndex=h},n.prototype.refresh=function(){return this.refreshDOM()},n.prototype.findOffsetFromItem=function(n){var i,t,u,r;if(r=-1,i=this.getPlaylist(),i)for(t=0,u=i.length;t<u;t++)if(i[t]===n){r=t;break}return r},n.prototype.resetLastSelected=function(){var r,n,u;for(r=t.getAll(this.dom.playlist,"."+this.css.selected),n=0,u=r.length;n<u;n++)i.removeClass(r[n],this.css.selected)},n.prototype.initDOM=function(){this.dom.playlistTarget=t.get(this.dom.o,".sm2-playlist-target");this.dom.playlistContainer=t.get(this.dom.o,".sm2-playlist-drawer");this.dom.playlist=t.get(this.dom.o,".sm2-playlist-bd")},n.prototype.refreshDOM=function(){if(!this.dom.playlist)return window.console&&console.warn&&console.warn("refreshDOM(): playlist node not found?"),!1;this.data.playlist=this.dom.playlist.getElementsByTagName("li")},n}();n.Sm2PlaylistController=r})(t=n.Player||(n.Player={}))}(Sm2Shim||(Sm2Shim={}));var Sm2Player=Sm2Shim.Player.Sm2Player,domUtils=Sm2ShimUtils.DomUtils,playerSelector=".sm2-bar-ui",players=[];soundManager.setup({html5PollingInterval:50,flashVersion:9,debugMode:!1,debugFlash:!1,preferFlash:!1,url:"https://mmixstaticassets.azureedge.net/Sm2Shim/"});soundManager.onready(function(){var n,t,i;if(n=domUtils.getAll(playerSelector),n&&n.length)for(t=0,i=n.length;t<i;t++)players.push(new Sm2Player(n[t]))});window.sm2BarPlayers=players;window.SM2BarPlayer=Sm2Player;